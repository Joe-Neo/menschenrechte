<!DOCTYPE html>
<html>
<script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>

<body>
    <div id='questions'></div>
    <button onclick="calculate()">Submit</button>
    <div id=score style="display: none;"> score is <span id=total></span></div>
</body>
<script>

    function calculate() {
        const correct = document.querySelectorAll("input:checked[value='correct']");
        const all = document.querySelectorAll("input:checked");

        document.getElementById('score').style.display = 'block'
        document.getElementById('total').innerHTML = correct.length + '/' + all.length
    }

    const template = Handlebars.compile(`<div>
        <div>
            Question {{questionNumber}}: {{qu}}
        </div>
        {{#each answers}}
        <input type="radio" id="{{value}}" name="{{../questionNumber}}" value="{{isCorrect}}">
        <label for="{{value}}">{{value}}</label><br>
        {{/each}}
        </div>`
    );

    // Here are the questions
    const questions = [
        {
            qu: 'How much do you weigh?',
            answers: [
                {
                    value: '123',
                    isCorrect: 'correct'
                },
                {
                    value: 'abc',
                }
            ]
        },
        {
            qu: 'How much?',
            answers: [
                {
                    value: '123',
                    isCorrect: 'correct'
                },
                {
                    value: 'abc',
                }
            ]
        },
        {
            qu: 'How much is this?',
            answers: [
                {
                    value: '123',
                    isCorrect: 'correct'
                },
                {
                    value: 'abc',
                }
            ]
        }
    ]

    // Randomise questions
    questions.sort(() => .5 - Math.random());

    // Print the questions
    for (let i = 0; i < questions.length; i++) {
        const q = questions[i];

        q.questionNumber = i + 1;
        const html = template(q);

        document.getElementById('questions').innerHTML += html;
    }

</script>

</html>